# Windows Troubleshooting<a name="windows-troubleshooting"></a>

The following are problems you might have when using Windows\-based clients to connect to a Client VPN endpoint\.

**Topics**
+ [OpenVPN Connect Client](#windows-troubleshooting-openvpn-connect)
+ [OpenVPN GUI](#windows-troubleshooting-openvpn-gui)

## OpenVPN Connect Client<a name="windows-troubleshooting-openvpn-connect"></a>

The following troubleshooting information was tested on versions 2\.6\.0\.100 and 2\.7\.1\.101 of the OpenVPN Connect Client software on Windows 10 Home \(64\-bit\) and Windows Server 2016 \(64\-bit\)\.

The configuration file is stored in the following location on your computer\.

```
C:\Users\User\AppData\Roaming\OpenVPN Connect\profile
```

The connection logs are stored in the following location on your computer\.

```
C:\Users\User\AppData\Roaming\OpenVPN Connect\logs
```

### Unable to Resolve DNS<a name="windows-troubleshooting-openvpn-connect-dns"></a>

**Problem**  
The connection fails with the following error\.

```
Transport Error: DNS resolve error on 'cvpn-endpoint-xyz123.prod.clientvpn.us-east-1.amazonaws.com (http://cvpn-endpoint-xyz123.prod.clientvpn.us-east-1.amazonaws.com/)' for UDP session: No such host is known.
```

**Cause**  
The DNS name cannot be resolved\. The client must prepend a random string to the DNS name to prevent DNS caching; however, some clients do not do this\.

**Solution**  
See the solution for [Unable to Resolve Client VPN Endpoint DNS Name](https://docs.aws.amazon.com/vpn/latest/clientvpn-admin/troubleshooting.html#resolve-host-name) in the *AWS Client VPN Administrator Guide*\.

### Missing PKI Alias<a name="windows-troubleshooting-openvpn-connect-pki"></a>

**Problem**  
A connection to a Client VPN endpoint that does not use mutual authentication fails with the following error\.

```
FATAL:CLIENT_EXCEPTION: connect error: Missing External PKI alias
```

**Cause**  
The OpenVPN Connect Client software has a known issue where it attempts to authenticate using mutual authentication\. If the configuration file does not contain a client key and certificate, authentication fails\.

**Solution**  
Specify a random client key and certificate in the Client VPN configuration file and import the new configuration into the OpenVPN Connect Client software\. Alternatively, use a different client, such as the OpenVPN GUI client \(v11\.12\.0\.0\) or the Viscosity client \(v\.1\.7\.14\)\.

### Certificate Error<a name="windows-troubleshooting-openvpn-connect-ca"></a>

**Problem**  
The connection fails with the following error\.

```
VERIFY ERROR: depth=3, error=unable to get issuer certificate: C=US, ST=Arizona, L=Scottsdale, O=Starfield Technologies, Inc., CN=Starfield Services Root Certificate Authority - G2
```

**Cause**  
Certificate Authority \(CA\) chain information is missing in the Client VPN configuration file provided by Amazon, which causes validation to fail\.

This issue can occur for certificates generated by AWS Certificate Manager\.

**Solution**  
Open the Client VPN configuration file \(the \.ovpn file\) and replace the third certificate in the <ca> section in with the following certificate, and then save the file\.

```
-----BEGIN CERTIFICATE-----
MIID7zCCAtegAwIBAgIBADANBgkqhkiG9w0BAQsFADCBmDELMAkGA1UEBhMCVVMx
EDAOBgNVBAgTB0FyaXpvbmExEzARBgNVBAcTClNjb3R0c2RhbGUxJTAjBgNVBAoT
HFN0YXJmaWVsZCBUZWNobm9sb2dpZXMsIEluYy4xOzA5BgNVBAMTMlN0YXJmaWVs
ZCBTZXJ2aWNlcyBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eSAtIEcyMB4XDTA5
MDkwMTAwMDAwMFoXDTM3MTIzMTIzNTk1OVowgZgxCzAJBgNVBAYTAlVTMRAwDgYD
VQQIEwdBcml6b25hMRMwEQYDVQQHEwpTY290dHNkYWxlMSUwIwYDVQQKExxTdGFy
ZmllbGQgVGVjaG5vbG9naWVzLCBJbmMuMTswOQYDVQQDEzJTdGFyZmllbGQgU2Vy
dmljZXMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkgLSBHMjCCASIwDQYJKoZI
hvcNAQEBBQADggEPADCCAQoCggEBANUMOsQq+U7i9b4Zl1+OiFOxHz/Lz58gE20p
OsgPfTz3a3Y4Y9k2YKibXlwAgLIvWX/2h/klQ4bnaRtSmpDhcePYLQ1Ob/bISdm2
8xpWriu2dBTrz/sm4xq6HZYuajtYlIlHVv8loJNwU4PahHQUw2eeBGg6345AWh1K
Ts9DkTvnVtYAcMtS7nt9rjrnvDH5RfbCYM8TWQIrgMw0R9+53pBlbQLPLJGmpufe
hRhJfGZOozptqbXuNC66DQO4M99H67FrjSXZm86B0UVGMpZwh94CDklDhbZsc7tk
6mFBrMnUVN+HL8cisibMn1lUaJ/8viovxFUcdUBgF4UCVTmLfwUCAwEAAaNCMEAw
DwYDVR0TAQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAQYwHQYDVR0OBBYEFJxfAN+q
AdcwKziIorhtSpzyEZGDMA0GCSqGSIb3DQEBCwUAA4IBAQBLNqaEd2ndOxmfZyMI
bw5hyf2E3F/YNoHN2BtBLZ9g3ccaaNnRbobhiCPPE95Dz+I0swSdHynVv/heyNXB
ve6SbzJ08pGCL72CQnqtKrcgfU28elUSwhXqvfdqlS5sdJ/PHLTyxQGjhdByPq1z
qwubdQxtRbeOlKyWN7Wg0I8VRw7j6IPdj/3vQQF3zCepYoUz8jcI73HPdwbeyBkd
iEDPfUYd/x7H4c7/I9vG+o1VTqkC50cRRj70/b17KSa7qWFiNyi2LSr2EIZkyXCn
0q23KXB56jzaYyWf/Wi3MOxw+3WKt21gZ7IeyLnp2KhvAotnDU0mV3HaIPzBSlCN
sSi6
-----END CERTIFICATE-----
```

Import the updated configuration file to the OpenVPN Connect Client software and connect to the Client VPN endpoint\.

## OpenVPN GUI<a name="windows-troubleshooting-openvpn-gui"></a>

The following troubleshooting information was tested on versions 11\.10\.0\.0 and 11\.11\.0\.0 of the OpenVPN GUI software on Windows 10 Home \(64\-bit\) and Windows Server 2016 \(64\-bit\)\.

The configuration file is stored in the following location on your computer\.

```
C:\Users\User\OpenVPN\config
```

The connection logs are stored in the following location on your computer\.

```
C:\Users\User\OpenVPN\log
```

### Certificate Error<a name="windows-troubleshooting-gui-connect-ca"></a>

**Problem**  
The connection fails with the following error\.

```
VERIFY ERROR: depth=3, error=unable to get issuer certificate: C=US, ST=Arizona, L=Scottsdale, O=Starfield Technologies, Inc., CN=Starfield Services Root Certificate Authority - G2
```

**Cause**  
CA chain information is missing in the Client VPN configuration file provided by Amazon, which causes validation to fail\.

This issue can occur for certificates generated by AWS Certificate Manager\.

**Solution**  
See the solution for [Certificate Error](#windows-troubleshooting-openvpn-connect-ca)\.